<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VetScan Pro 8.0 MAGIC - Die ultimative Version! üéâ</title>
    
    <!-- Three.js f√ºr 3D -->
    <script src="https://unpkg.com/three@0.128.0/build/three.min.js"></script>
    <script src="https://unpkg.com/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://unpkg.com/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* MAGIC BANNER - Un√ºbersehbar! */
        .magic-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(90deg, 
                #ff0080, #ff8c00, #ffd700, #00ff00, 
                #00ffff, #0080ff, #8000ff, #ff0080);
            background-size: 200% 100%;
            animation: rainbow 3s linear infinite;
            color: white;
            padding: 15px;
            text-align: center;
            z-index: 10000;
            font-size: 20px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        @keyframes rainbow {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }

        .container {
            max-width: 1400px;
            margin: 80px auto 20px;
            padding: 20px;
        }

        /* Hauptbereich mit 3D-Viewer und Game */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        @media (max-width: 900px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .game-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        /* 3D Viewer */
        #viewer-3d {
            width: 100%;
            height: 500px;
            border-radius: 10px;
            background: #1a1a2e;
            position: relative;
        }

        /* Medical Mode Buttons */
        .medical-modes {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .mode-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            font-weight: bold;
        }

        .mode-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .mode-btn.active {
            background: linear-gradient(135deg, #f093fb, #f5576c);
        }

        /* Scanner Game */
        .scanner-container {
            position: relative;
            background: #0f0f23;
            border-radius: 10px;
            padding: 20px;
            color: white;
        }

        .scanner-screen {
            background: linear-gradient(180deg, #001a00 0%, #003300 100%);
            border: 2px solid #00ff00;
            border-radius: 10px;
            padding: 20px;
            min-height: 300px;
            position: relative;
            overflow: hidden;
        }

        .scan-line {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: #00ff00;
            box-shadow: 0 0 10px #00ff00;
            animation: scan 2s linear infinite;
        }

        @keyframes scan {
            0% { top: 0%; }
            100% { top: 100%; }
        }

        .animal-info {
            margin-top: 20px;
        }

        .vital-sign {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            margin: 5px 0;
            background: rgba(0, 255, 0, 0.1);
            border-radius: 5px;
            border-left: 3px solid #00ff00;
        }

        /* Fun Features */
        .achievement-popup {
            position: fixed;
            top: 100px;
            right: 20px;
            background: gold;
            color: #333;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.5s ease-out;
            z-index: 9999;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .party-mode {
            animation: party 0.5s ease-in-out infinite;
        }

        @keyframes party {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.05) rotate(1deg); }
            75% { transform: scale(1.05) rotate(-1deg); }
        }

        /* Score Display */
        .score-display {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #333;
            padding: 15–ø–∞–Ω–∞;
            border-radius: 15px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            margin: 20px 0;
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4);
        }

        /* Confetti Effect */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #f0f;
            animation: confetti-fall 3s linear;
            z-index: 9998;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* Control Panel */
        .control-panel {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .mega-button {
            width: 100%;
            padding: 20px;
            font-size: 20px;
            font-weight: bold;
            background: linear-gradient(135deg, #ff6b6b, #ffd93d);
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .mega-button:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        /* Info Cards */
        .feature-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .feature-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .feature-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <!-- MAGIC BANNER -->
    <div class="magic-banner">
        üéâ VetScan Pro 8.0 MAGIC EDITION - Blender MCP Integration FUNKTIONIERT! - Build 2025.08.25.FINAL üéâ
    </div>

    <div class="container">
        <!-- Hauptbereich -->
        <div class="main-content">
            <!-- 3D Viewer -->
            <div class="game-card">
                <h2>üêï 3D Hund mit Party-Accessoires</h2>
                <div id="viewer-3d"></div>
                <div class="medical-modes">
                    <button class="mode-btn active" onclick="setMedicalMode('normal')">Normal</button>
                    <button class="mode-btn" onclick="setMedicalMode('xray')">ü¶¥ R√∂ntgen</button>
                    <button class="mode-btn" onclick="setMedicalMode('ultrasound')">üì° Ultraschall</button>
                    <button class="mode-btn" onclick="setMedicalMode('thermal')">üå°Ô∏è Thermal</button>
                    <button class="mode-btn" onclick="setMedicalMode('party')">üéâ PARTY MODE!</button>
                </div>
            </div>

            <!-- Scanner Game -->
            <div class="game-card">
                <h2>üè• Tier-Scanner Spiel</h2>
                <div class="scanner-container">
                    <div class="scanner-screen">
                        <div class="scan-line"></div>
                        <h3 id="animal-name">Scanne ein Tier...</h3>
                        <div class="animal-info" id="animal-info">
                            <div class="vital-sign">
                                <span>‚ù§Ô∏è Herzrate:</span>
                                <span id="heart-rate">-- BPM</span>
                            </div>
                            <div class="vital-sign">
                                <span>üå°Ô∏è Temperatur:</span>
                                <span id="temperature">-- ¬∞C</span>
                            </div>
                            <div class="vital-sign">
                                <span>ü´Å Atmung:</span>
                                <span id="breathing">-- /min</span>
                            </div>
                            <div class="vital-sign">
                                <span>‚ö° Status:</span>
                                <span id="status">Bereit</span>
                            </div>
                        </div>
                    </div>
                    <button class="mega-button" onclick="scanAnimal()">
                        üîç TIER SCANNEN!
                    </button>
                </div>
            </div>
        </div>

        <!-- Score -->
        <div class="score-display" id="score-display">
            üèÜ Punkte: <span id="score">0</span> | üéØ Streak: <span id="streak">0</span> | ‚≠ê Level: <span id="level">1</span>
        </div>

        <!-- Control Panel -->
        <div class="control-panel">
            <h2>üéÆ Magic Controls</h2>
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px;">
                <button class="mega-button" onclick="activatePartyMode()" style="background: linear-gradient(135deg, #ff0080, #ff8c00);">
                    üéâ PARTY MODE!
                </button>
                <button class="mega-button" onclick="spawnConfetti()" style="background: linear-gradient(135deg, #00ff00, #00ffff);">
                    üéä KONFETTI!
                </button>
                <button class="mega-button" onclick="superScan()" style="background: linear-gradient(135deg, #8000ff, #ff0080);">
                    ‚ö° SUPER SCAN!
                </button>
            </div>
        </div>

        <!-- Feature Cards -->
        <div class="feature-cards">
            <div class="feature-card">
                <div class="feature-icon">üéØ</div>
                <h3>Blender MCP</h3>
                <p>90% funktional! Kreative Kontrolle √ºber 3D-Objekte via Port 9876!</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üèÜ</div>
                <h3>Achievements</h3>
                <p>Sammle Punkte und schalte neue Features frei!</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üé®</div>
                <h3>Creative Mode</h3>
                <p>Der Hund hat Party-Hut, Halsband und Ball!</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üöÄ</div>
                <h3>Magic Features</h3>
                <p>√úberraschungen in jedem Klick!</p>
            </div>
        </div>
    </div>

    <script>
        // Game State
        let score = 0;
        let streak = 0;
        let level = 1;
        let currentMode = 'normal';
        let scene, camera, renderer, controls;
        let dogModel = null;

        // Tiere f√ºr Scanner
        const animals = [
            { name: 'üêï Bello', heart: 80, temp: 38.5, breath: 20, status: 'Gesund' },
            { name: 'üê± Mimi', heart: 120, temp: 38.8, breath: 25, status: 'Leicht erh√∂hte Temperatur' },
            { name: 'üê∞ Hoppel', heart: 180, temp: 39.0, breath: 35, status: 'Normal f√ºr Kaninchen' },
            { name: 'üêπ Freddy', heart: 400, temp: 37.5, breath: 100, status: 'Typisch Hamster' },
            { name: 'ü¶ú Coco', heart: 250, temp: 41.0, breath: 60, status: 'Vogel-Normal' },
            { name: 'üê¥ Thunder', heart: 40, temp: 37.8, breath: 12, status: 'Pferd in Ruhe' },
            { name: 'üê¢ Speedy', heart: 30, temp: 25.0, breath: 4, status: 'Schildkr√∂te chillt' },
            { name: 'ü¶é Gecko', heart: 60, temp: 28.0, breath: 20, status: 'Echse sonnt sich' }
        ];

        // Initialize 3D
        function init3D() {
            const container = document.getElementById('viewer-3d');
            
            // Scene
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x1a1a2e);
            
            // Camera
            camera = new THREE.PerspectiveCamera(
                75, 
                container.clientWidth / container.clientHeight,
                0.1,
                1000
            );
            camera.position.set(5, 5, 5);
            
            // Renderer
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            renderer.shadowMap.enabled = true;
            container.appendChild(renderer.domElement);
            
            // Controls
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            
            // Lights
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(5, 10, 5);
            directionalLight.castShadow = true;
            scene.add(directionalLight);
            
            // Load Dog Model or Create Procedural
            loadDogModel();
            
            // Animation Loop
            animate();
        }

        function loadDogModel() {
            const loader = new THREE.GLTFLoader();
            
            // Try loading creative dog
            loader.load(
                'assets/models/animals/dog/dog_creative.glb',
                function(gltf) {
                    dogModel = gltf.scene;
                    scene.add(dogModel);
                    console.log('‚úÖ Creative dog loaded!');
                },
                function(progress) {
                    // Progress
                },
                function(error) {
                    console.log('Creating procedural dog...');
                    createProceduralDog();
                }
            );
        }

        function createProceduralDog() {
            const group = new THREE.Group();
            
            // Body
            const bodyGeo = new THREE.SphereGeometry(1, 32, 16);
            const bodyMat = new THREE.MeshPhongMaterial({ 
                color: 0x8844ff,
                emissive: 0x220088,
                emissiveIntensity: 0.2
            });
            const body = new THREE.Mesh(bodyGeo, bodyMat);
            group.add(body);
            
            // Head
            const headGeo = new THREE.SphereGeometry(0.6, 32, 16);
            const headMat = new THREE.MeshPhongMaterial({ color: 0x9955ff });
            const head = new THREE.Mesh(headGeo, headMat);
            head.position.set(0.8, 0.5, 0);
            group.add(head);
            
            // Party Hat
            const hatGeo = new THREE.ConeGeometry(0.3, 0.8, 8);
            const hatMat = new THREE.MeshPhongMaterial({ 
                color: 0xff0080,
                emissive: 0xff0080,
                emissiveIntensity: 0.3
            });
            const hat = new THREE.Mesh(hatGeo, hatMat);
            hat.position.set(0.8, 1.3, 0);
            group.add(hat);
            
            // Collar
            const collarGeo = new THREE.TorusGeometry(0.7, 0.08, 8, 20);
            const collarMat = new THREE.MeshPhongMaterial({ 
                color: 0xff0000,
                emissive: 0xff0000,
                emissiveIntensity: 0.5
            });
            const collar = new THREE.Mesh(collarGeo, collarMat);
            collar.position.set(0.3, 0.3, 0);
            collar.rotation.y = Math.PI / 2;
            group.add(collar);
            
            // Ball
            const ballGeo = new THREE.SphereGeometry(0.3, 16, 16);
            const ballMat = new THREE.MeshPhongMaterial({ 
                color: 0x00ff00,
                emissive: 0x00ff00,
                emissiveIntensity: 0.2
            });
            const ball = new THREE.Mesh(ballGeo, ballMat);
            ball.position.set(2, 0, 0);
            group.add(ball);
            
            dogModel = group;
            scene.add(dogModel);
        }

        function animate() {
            requestAnimationFrame(animate);
            
            controls.update();
            
            // Rotate dog
            if (dogModel) {
                if (currentMode === 'party') {
                    dogModel.rotation.y += 0.05;
                    dogModel.position.y = Math.sin(Date.now() * 0.002) * 0.2;
                } else {
                    dogModel.rotation.y += 0.005;
                }
            }
            
            renderer.render(scene, camera);
        }

        // Medical Modes
        function setMedicalMode(mode) {
            currentMode = mode;
            
            // Update buttons
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Change materials based on mode
            if (dogModel) {
                if (mode === 'party') {
                    activatePartyMode();
                } else if (mode === 'xray') {
                    applyXRayMode();
                } else if (mode === 'thermal') {
                    applyThermalMode();
                } else {
                    applyNormalMode();
                }
            }
        }

        function applyXRayMode() {
            scene.traverse((child) => {
                if (child.isMesh) {
                    child.material = new THREE.MeshPhongMaterial({
                        color: 0xaaaaaa,
                        transparent: true,
                        opacity: 0.3,
                        side: THREE.DoubleSide
                    });
                }
            });
        }

        function applyThermalMode() {
            scene.traverse((child) => {
                if (child.isMesh) {
                    const colors = [0xff0000, 0xff8800, 0xffff00, 0x00ff00, 0x0000ff];
                    const randomColor = colors[Math.floor(Math.random() * colors.length)];
                    child.material = new THREE.MeshPhongMaterial({
                        color: randomColor,
                        emissive: randomColor,
                        emissiveIntensity: 0.5
                    });
                }
            });
        }

        function applyNormalMode() {
            if (dogModel) {
                loadDogModel(); // Reload original
            }
        }

        // Scanner Game
        function scanAnimal() {
            const animal = animals[Math.floor(Math.random() * animals.length)];
            
            // Update display
            document.getElementById('animal-name').textContent = `Patient: ${animal.name}`;
            
            // Animate values
            animateValue('heart-rate', 0, animal.heart, 1000, ' BPM');
            animateValue('temperature', 35, animal.temp, 1000, ' ¬∞C');
            animateValue('breathing', 0, animal.breath, 1000, ' /min');
            
            setTimeout(() => {
                document.getElementById('status').textContent = animal.status;
                
                // Score
                score += 100;
                streak++;
                if (streak % 5 === 0) {
                    level++;
                    showAchievement('Level Up! üéâ');
                }
                
                updateScore();
            }, 1200);
            
            // Visual feedback
            flashScreen();
        }

        function animateValue(id, start, end, duration, suffix = '') {
            const element = document.getElementById(id);
            const range = end - start;
            const increment = range / (duration / 10);
            let current = start;
            
            const timer = setInterval(() => {
                current += increment;
                if ((increment > 0 && current >= end) || (increment < 0 && current <= end)) {
                    current = end;
                    clearInterval(timer);
                }
                element.textContent = Math.round(current) + suffix;
            }, 10);
        }

        function updateScore() {
            document.getElementById('score').textContent = score;
            document.getElementById('streak').textContent = streak;
            document.getElementById('level').textContent = level;
        }

        // Fun Features
        function activatePartyMode() {
            document.body.classList.add('party-mode');
            spawnConfetti();
            
            // Make everything rainbow
            const banner = document.querySelector('.magic-banner');
            banner.style.fontSize = '30px';
            
            setTimeout(() => {
                document.body.classList.remove('party-mode');
            }, 3000);
        }

        function spawnConfetti() {
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.background = `hsl(${Math.random() * 360}, 100%, 50%)`;
                    confetti.style.width = Math.random() * 10 + 5 + 'px';
                    confetti.style.height = confetti.style.width;
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 30);
            }
        }

        function superScan() {
            // Scan all animals at once!
            showAchievement('SUPER SCAN AKTIVIERT! ‚ö°');
            
            for (let i = 0; i < 5; i++) {
                setTimeout(() => scanAnimal(), i * 500);
            }
            
            score += 1000;
            updateScore();
        }

        function showAchievement(text) {
            const popup = document.createElement('div');
            popup.className = 'achievement-popup';
            popup.innerHTML = `
                <h3>üèÜ Achievement Unlocked!</h3>
                <p>${text}</p>
            `;
            document.body.appendChild(popup);
            
            setTimeout(() => popup.remove(), 3000);
        }

        function flashScreen() {
            const flash = document.createElement('div');
            flash.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: white;
                opacity: 0.5;
                z-index: 9999;
                pointer-events: none;
            `;
            document.body.appendChild(flash);
            
            setTimeout(() => flash.remove(), 100);
        }

        // Initialize on load
        window.onload = function() {
            init3D();
            updateScore();
            
            // Welcome message
            setTimeout(() => {
                showAchievement('Willkommen zur MAGIC EDITION! üéâ');
            }, 1000);
            
            // Auto party mode every minute
            setInterval(() => {
                if (Math.random() > 0.7) {
                    activatePartyMode();
                }
            }, 60000);
        };

        // Responsive
        window.onresize = function() {
            const container = document.getElementById('viewer-3d');
            camera.aspect = container.clientWidth / container.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(container.clientWidth, container.clientHeight);
        };

        // Easter Egg: Konami Code
        let konamiCode = [];
        const konamiPattern = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
        
        document.addEventListener('keydown', (e) => {
            konamiCode.push(e.key);
            konamiCode = konamiCode.slice(-10);
            
            if (konamiCode.join(',') === konamiPattern.join(',')) {
                alert('üéÆ GODMODE AKTIVIERT! Du bist jetzt ein Tierarzt-Gott!');
                score += 99999;
                level = 99;
                updateScore();
                for (let i = 0; i < 10; i++) {
                    spawnConfetti();
                }
            }
        });
    </script>
</body>
</html>